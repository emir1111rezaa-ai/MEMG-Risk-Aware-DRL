# Ø³Ù†Ø¯ ÙÙ†ÛŒ Ø¬Ø§Ù…Ø¹ - Ø³ÛŒØ³ØªÙ… Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ù†Ø±Ú˜ÛŒ Ø±ÛŒØ²Ø´Ø¨Ú©Ù‡ Ú†Ù†Ø¯Ø§Ù†Ø±Ú˜ÛŒ

## ÙÙ‡Ø±Ø³Øª Ù…Ø·Ø§Ù„Ø¨

1. [Ù…Ø¹Ù…Ø§Ø±ÛŒ Ø³ÛŒØ³ØªÙ…](#Ù…Ø¹Ù…Ø§Ø±ÛŒ-Ø³ÛŒØ³ØªÙ…)
2. [Ù…Ø¯Ù„â€ŒØ³Ø§Ø²ÛŒ Ø±ÛŒØ§Ø¶ÛŒ](#Ù…Ø¯Ù„â€ŒØ³Ø§Ø²ÛŒ-Ø±ÛŒØ§Ø¶ÛŒ)
3. [Ù…Ø§Ú˜ÙˆÙ„ Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡](#Ù…Ø§Ú˜ÙˆÙ„-Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ-Ù¾ÛŒØ´Ø±ÙØªÙ‡)
4. [Ø¹Ø§Ù…Ù„ DRL Ø¢Ú¯Ø§Ù‡ Ø¨Ù‡ Ø±ÛŒØ³Ú©](#Ø¹Ø§Ù…Ù„-drl-Ø¢Ú¯Ø§Ù‡-Ø¨Ù‡-Ø±ÛŒØ³Ú©)
5. [Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ Ù…Ø±Ø¬Ø¹](#Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ-Ù…Ø±Ø¬Ø¹)
6. [Ù…Ø¹ÛŒØ§Ø±Ù‡Ø§ÛŒ Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ](#Ù…Ø¹ÛŒØ§Ø±Ù‡Ø§ÛŒ-Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ)
7. [Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ ØªÙ†Ø¸ÛŒÙ…](#Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ-ØªÙ†Ø¸ÛŒÙ…)

---

## Ù…Ø¹Ù…Ø§Ø±ÛŒ Ø³ÛŒØ³ØªÙ…

### Ù†Ù…Ø§ÛŒ Ú©Ù„ÛŒ

Ø³ÛŒØ³ØªÙ… MEMG Ø´Ø§Ù…Ù„ 4 Ù„Ø§ÛŒÙ‡ Ø§ØµÙ„ÛŒ Ø§Ø³Øª:

```
Ù„Ø§ÛŒÙ‡ 4: Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ùˆ ØªØ­Ù„ÛŒÙ„
         â†‘
Ù„Ø§ÛŒÙ‡ 3: ØªØµÙ…ÛŒÙ…â€ŒÚ¯ÛŒØ±ÛŒ (PPO Agent)
         â†‘
Ù„Ø§ÛŒÙ‡ 2: Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ (CNN-LSTM)
         â†‘
Ù„Ø§ÛŒÙ‡ 1: ÙÛŒØ²ÛŒÚ© Ø³ÛŒØ³ØªÙ… (MEMG Environment)
```

### Ø§Ø¬Ø²Ø§ÛŒ ÙÛŒØ²ÛŒÚ©ÛŒ Ø±ÛŒØ²Ø´Ø¨Ú©Ù‡

#### 1. Ø¨Ø§Ø³ Ø§Ù„Ú©ØªØ±ÛŒÚ©ÛŒ

**Ù…Ù†Ø§Ø¨Ø¹ ØªÙˆÙ„ÛŒØ¯:**
- **PV (Photovoltaic)**: 200 kW Ø¸Ø±ÙÛŒØª Ù†ØµØ¨ Ø´Ø¯Ù‡
  - Ø¶Ø±ÛŒØ¨ Ø¸Ø±ÙÛŒØª Ù…ØªÙˆØ³Ø·: 20%
  - ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒ Ø¨Ù‡ ØªØ§Ø¨Ø´ Ø®ÙˆØ±Ø´ÛŒØ¯ Ùˆ Ø²Ù…Ø§Ù† Ø±ÙˆØ²
  - Ø§Ù„Ú¯ÙˆÛŒ ØªÙˆÙ„ÛŒØ¯: Ù…Ù†Ø­Ù†ÛŒ Ø²Ù†Ú¯ÙˆÙ„Ù‡â€ŒØ§ÛŒ Ø¯Ø± Ø³Ø§Ø¹Ø§Øª 6-18

- **WT (Wind Turbine)**: 150 kW Ø¸Ø±ÙÛŒØª
  - Ø¶Ø±ÛŒØ¨ Ø¸Ø±ÙÛŒØª Ù…ØªÙˆØ³Ø·: 30%
  - ØªØºÛŒÛŒØ±Ù¾Ø°ÛŒØ±ÛŒ Ø¨Ø§Ù„Ø§ (intermittency)
  - Ù…Ù†Ø­Ù†ÛŒ ØªÙˆØ§Ù† ØºÛŒØ±Ø®Ø·ÛŒ

**Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²:**
- **Battery**: 500 kWh Ø¸Ø±ÙÛŒØª
  - ØªÙˆØ§Ù† Ø´Ø§Ø±Ú˜/Ø¯Ø´Ø§Ø±Ú˜: Â±100 kW
  - Ù…Ø­Ø¯ÙˆØ¯Ù‡ SOC: 10%-90%
  - Ø±Ø§Ù†Ø¯Ù…Ø§Ù† Ø´Ø§Ø±Ú˜: 95%
  - Ø±Ø§Ù†Ø¯Ù…Ø§Ù† Ø¯Ø´Ø§Ø±Ú˜: 95%
  - Ù‡Ø²ÛŒÙ†Ù‡ Ø§Ø³ØªÙ‡Ù„Ø§Ú©: 0.05 $/kWh

#### 2. ÙˆØ§Ø­Ø¯ CHP (Combined Heat and Power)

**Ù…Ø´Ø®ØµØ§Øª:**
- ØªÙˆØ§Ù† Ø§Ù„Ú©ØªØ±ÛŒÚ©ÛŒ: 20-100 kW
- Ø±Ø§Ù†Ø¯Ù…Ø§Ù† Ø§Ù„Ú©ØªØ±ÛŒÚ©ÛŒ: 35%
- Ø±Ø§Ù†Ø¯Ù…Ø§Ù† Ø­Ø±Ø§Ø±ØªÛŒ: 45%
- Ø±Ø§Ù†Ø¯Ù…Ø§Ù† Ú©Ù„: 80%
- Ù†Ø±Ø® Ø±Ù…Ù¾: 30 kW/h
- Ù†Ø³Ø¨Øª Ø­Ø±Ø§Ø±Øª Ø¨Ù‡ Ø¨Ø±Ù‚: 1.29:1

**Ù…Ø¯Ù„ Ø±ÛŒØ§Ø¶ÛŒ:**
```
P_thermal_CHP = P_elec_CHP Ã— (Î·_thermal / Î·_elec)
Q_gas_CHP = P_elec_CHP / Î·_elec
Cost_CHP = Q_gas Ã— Price_gas + P_elec Ã— Cost_maintenance
```

#### 3. Ø¨ÙˆÛŒÙ„Ø± Ú¯Ø§Ø²Ø³ÙˆØ²

**Ù…Ø´Ø®ØµØ§Øª:**
- ØªÙˆØ§Ù† Ø­Ø±Ø§Ø±ØªÛŒ: 0-150 kW
- Ø±Ø§Ù†Ø¯Ù…Ø§Ù†: 90%
- Ø³ÙˆØ®Øª: Ú¯Ø§Ø² Ø·Ø¨ÛŒØ¹ÛŒ

**Ù…Ø¯Ù„:**
```
Q_gas_boiler = P_thermal / Î·_boiler
Cost_boiler = Q_gas Ã— Price_gas + P_thermal Ã— Cost_maintenance
```

#### 4. Ø§ØªØµØ§Ù„ Ø´Ø¨Ú©Ù‡

**Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§:**
- Ø­Ø¯Ø§Ú©Ø«Ø± Ø®Ø±ÛŒØ¯: 250 kW
- Ø­Ø¯Ø§Ú©Ø«Ø± ÙØ±ÙˆØ´: 200 kW
- Ù‚ÛŒÙ…Øª Ø®Ø±ÛŒØ¯ Ù¾Ø§ÛŒÙ‡: 0.12 $/kWh
- Ù‚ÛŒÙ…Øª ÙØ±ÙˆØ´ (FiT): 0.08 $/kWh
- Ø³Ø§Ø¹Ø§Øª Ù¾ÛŒÚ© (Ø¶Ø±ÛŒØ¨ 1.5): 17-21

---

## Ù…Ø¯Ù„â€ŒØ³Ø§Ø²ÛŒ Ø±ÛŒØ§Ø¶ÛŒ

### ÙØ±Ù…ÙˆÙ„â€ŒØ¨Ù†Ø¯ÛŒ MDP

#### ÙØ¶Ø§ÛŒ Ø­Ø§Ù„Øª (State Space)

Ø¨Ø±Ø¯Ø§Ø± Ø­Ø§Ù„Øª 10 Ø¨Ø¹Ø¯ÛŒ:

```
s_t = [SOC_t, PÌ‚_pv,t, PÌ‚_wt,t, PÌ‚_load_elec,t, PÌ‚_load_th,t, 
       Ï€_grid,t, h_t, d_t, P_chp,t-1, Ïƒ_forecast,t]
```

Ú©Ù‡:
- `SOC_t`: State of Charge Ø¨Ø§ØªØ±ÛŒ (Ù†Ø±Ù…Ø§Ù„ Ø´Ø¯Ù‡)
- `PÌ‚_*`: Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒâ€ŒÙ‡Ø§ÛŒ ØªÙˆØ§Ù† (Ù†Ø±Ù…Ø§Ù„ Ø´Ø¯Ù‡)
- `Ï€_grid,t`: Ù‚ÛŒÙ…Øª Ø´Ø¨Ú©Ù‡ (Ù†Ø±Ù…Ø§Ù„ Ø´Ø¯Ù‡)
- `h_t`: Ø³Ø§Ø¹Øª Ø±ÙˆØ² / 23
- `d_t`: Ø±ÙˆØ² Ù‡ÙØªÙ‡ / 6
- `P_chp,t-1`: ØªÙˆØ§Ù† CHP Ù‚Ø¨Ù„ÛŒ (Ø¨Ø±Ø§ÛŒ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø±Ù…Ù¾)
- `Ïƒ_forecast,t`: Ø¹Ø¯Ù… Ù‚Ø·Ø¹ÛŒØª Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ

#### ÙØ¶Ø§ÛŒ Ø¹Ù…Ù„ (Action Space)

Ø¨Ø±Ø¯Ø§Ø± Ø¹Ù…Ù„ 4 Ø¨Ø¹Ø¯ÛŒ (Ù†Ø±Ù…Ø§Ù„ Ø´Ø¯Ù‡):

```
a_t = [a_bat, a_chp, a_grid, a_boiler]
```

Ù…Ø­Ø¯ÙˆØ¯Ù‡:
- `a_bat âˆˆ [-1, 1]`: Ù…Ù†ÙÛŒ=Ø´Ø§Ø±Ú˜ØŒ Ù…Ø«Ø¨Øª=Ø¯Ø´Ø§Ø±Ú˜
- `a_chp âˆˆ [0, 1]`: Ù†Ø³Ø¨Øª Ø¨Ù‡ Ø­Ø¯Ø§Ú©Ø«Ø± ØªÙˆØ§Ù†
- `a_grid âˆˆ [-1, 1]`: Ù…Ù†ÙÛŒ=ØµØ§Ø¯Ø±Ø§ØªØŒ Ù…Ø«Ø¨Øª=ÙˆØ§Ø±Ø¯Ø§Øª
- `a_boiler âˆˆ [0, 1]`: Ù†Ø³Ø¨Øª Ø¨Ù‡ Ø­Ø¯Ø§Ú©Ø«Ø± ØªÙˆØ§Ù†

**ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ Ø§Ø¹Ù…Ø§Ù„ ÙÛŒØ²ÛŒÚ©ÛŒ:**
```python
P_bat = a_bat Ã— P_bat_max
P_chp = a_chp Ã— P_chp_max
P_grid = a_grid Ã— P_import_max  if a_grid > 0 else a_grid Ã— P_export_max
P_boiler = a_boiler Ã— P_boiler_max
```

#### ØªØ§Ø¨Ø¹ Ù¾Ø§Ø¯Ø§Ø´ (Reward Function)

```
R_t = -(Î»_cost Ã— Cost_t + 
        Î»_risk Ã— CVaR_penalty_t + 
        Î»_viol Ã— Violation_penalty_t + 
        Î»_smooth Ã— Smoothness_penalty_t)
```

**Ø§Ø¬Ø²Ø§ÛŒ Ù‡Ø²ÛŒÙ†Ù‡:**
```
Cost_t = Cost_grid + Cost_CHP + Cost_boiler + Cost_bat_deg + Cost_bat_cycle
```

**Ø¬Ø±ÛŒÙ…Ù‡ Ù†Ù‚Ø¶ Ù‚ÛŒÙˆØ¯:**
```
Violation_penalty = Î£ (penalty_weight_i Ã— violation_magnitude_i)
```

Ø§Ù†ÙˆØ§Ø¹ Ù†Ù‚Ø¶:
1. Ù†Ù‚Ø¶ Ù…Ø­Ø¯ÙˆØ¯Ù‡ SOC: 500 $/ÙˆØ§Ø­Ø¯
2. Ù†Ù‚Ø¶ ØªÙˆØ§Ù† Ø¨Ø§ØªØ±ÛŒ: 300 $/ÙˆØ§Ø­Ø¯
3. Ù†Ù‚Ø¶ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø´Ø¨Ú©Ù‡: 1000 $/ÙˆØ§Ø­Ø¯
4. Ù†Ù‚Ø¶ Ù†Ø±Ø® Ø±Ù…Ù¾ CHP: 200 $/ÙˆØ§Ø­Ø¯
5. Ø¹Ø¯Ù… ØªØ¹Ø§Ø¯Ù„ ØªÙˆØ§Ù† Ø§Ù„Ú©ØªØ±ÛŒÚ©ÛŒ: 1000 $/ÙˆØ§Ø­Ø¯
6. Ø¹Ø¯Ù… ØªØ¹Ø§Ø¯Ù„ ØªÙˆØ§Ù† Ø­Ø±Ø§Ø±ØªÛŒ: 800 $/ÙˆØ§Ø­Ø¯

#### Ù‚ÛŒÙˆØ¯ Ø³ÛŒØ³ØªÙ…

**1. ØªØ¹Ø§Ø¯Ù„ ØªÙˆØ§Ù† Ø§Ù„Ú©ØªØ±ÛŒÚ©ÛŒ:**
```
P_pv,t + P_wt,t + P_chp,t + P_bat,t + P_grid,t = P_load_elec,t
```

**2. ØªØ¹Ø§Ø¯Ù„ ØªÙˆØ§Ù† Ø­Ø±Ø§Ø±ØªÛŒ:**
```
P_chp_thermal,t + P_boiler,t â‰¥ P_load_thermal,t
```

**3. Ø¯ÛŒÙ†Ø§Ù…ÛŒÚ© Ø¨Ø§ØªØ±ÛŒ:**
```
SOC_{t+1} = SOC_t + (Î”E_bat,t / E_bat_capacity)

Î”E_bat = { P_bat Ã— Î·_charge Ã— Î”t      if P_bat < 0 (charging)
         { -P_bat / Î·_discharge Ã— Î”t  if P_bat > 0 (discharging)
```

**4. Ù…Ø­Ø¯ÙˆØ¯ÛŒØª SOC:**
```
SOC_min â‰¤ SOC_t â‰¤ SOC_max
0.1 â‰¤ SOC_t â‰¤ 0.9
```

**5. Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø±Ù…Ù¾ CHP:**
```
|P_chp,t - P_chp,t-1| â‰¤ R_chp = 30 kW/h
```

**6. Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø¹Ù…Ù„ÛŒØ§ØªÛŒ CHP:**
```
if P_chp > 0: P_chp_min â‰¤ P_chp â‰¤ P_chp_max
              20 kW â‰¤ P_chp â‰¤ 100 kW
```

---

## Ù…Ø§Ú˜ÙˆÙ„ Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡

### Ù…Ø¹Ù…Ø§Ø±ÛŒ CNN-LSTM

```
Input (168 timesteps)
    â†“
[Wavelet Preprocessing]
    â†“
CNN Layers:
  Conv1D(1 â†’ 64, kernel=3) + BatchNorm + ReLU + Dropout(0.2)
  Conv1D(64 â†’ 128, kernel=3) + BatchNorm + ReLU + Dropout(0.2)
  Conv1D(128 â†’ 64, kernel=3) + BatchNorm + ReLU + Dropout(0.2)
    â†“
LSTM Layers:
  LSTM(64 â†’ 128, layers=2, dropout=0.2)
    â†“
[Multi-Head Attention (4 heads)]
    â†“
Fully Connected:
  Linear(128 â†’ 64) + ReLU + Dropout(0.2)
  Linear(64 â†’ 24)  # Output: 24-hour forecast
```

### Ù¾ÛŒØ´â€ŒÙ¾Ø±Ø¯Ø§Ø²Ø´ Wavelet

**ØªØ¬Ø²ÛŒÙ‡ Ù…ÙˆØ¬Ú©:**
```python
coeffs = pywt.wavedec(signal, 'db4', level=3)
# coeffs[0]: Approximation (Ø±ÙˆÙ†Ø¯ Ú©Ù„ÛŒ)
# coeffs[1:]: Details (Ù†ÙˆØ³Ø§Ù†Ø§Øª)
```

**Ø­Ø°Ù Ù†ÙˆÛŒØ² (Soft Thresholding):**
```
threshold = Î» Ã— std(detail_coeffs)
denoised = sign(x) Ã— max(|x| - threshold, 0)
```

### Ø¨Ø±Ø¢ÙˆØ±Ø¯ Ø¹Ø¯Ù… Ù‚Ø·Ø¹ÛŒØª (MC Dropout)

```python
# Generate N samples with dropout enabled
for i in range(30):
    sample_i = model(x)  # with dropout

# Uncertainty = standard deviation of samples
Î¼_forecast = mean(samples)
Ïƒ_forecast = std(samples)
```

### Ù…Ø¹ÛŒØ§Ø±Ù‡Ø§ÛŒ Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ

**1. MAE (Mean Absolute Error):**
```
MAE = (1/N) Î£ |y_true - y_pred|
```

**2. RMSE (Root Mean Squared Error):**
```
RMSE = sqrt((1/N) Î£ (y_true - y_pred)Â²)
```

**3. MAPE (Mean Absolute Percentage Error):**
```
MAPE = (100/N) Î£ |y_true - y_pred| / y_true
```

**4. Coverage (Ù¾ÙˆØ´Ø´ ÙÙˆØ§ØµÙ„ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† 95%):**
```
Coverage = (1/N) Î£ ğŸ™[y_true âˆˆ [Î¼ - 1.96Ïƒ, Î¼ + 1.96Ïƒ]]
```

---

## Ø¹Ø§Ù…Ù„ DRL Ø¢Ú¯Ø§Ù‡ Ø¨Ù‡ Ø±ÛŒØ³Ú©

### Ù…Ø¹Ù…Ø§Ø±ÛŒ PPO

**Actor Network (Policy):**
```
State (10) â†’ Linear(256) â†’ LayerNorm â†’ ReLU â†’ Dropout(0.1)
          â†’ Linear(256) â†’ LayerNorm â†’ ReLU â†’ Dropout(0.1)
          â†’ Linear(128) â†’ LayerNorm â†’ ReLU â†’ Dropout(0.1)
          â†’ Linear(4) â†’ [Tanh/Sigmoid] â†’ Action
```

**Critic Network (Value):**
```
State (10) â†’ Linear(256) â†’ LayerNorm â†’ ReLU â†’ Dropout(0.1)
          â†’ Linear(256) â†’ LayerNorm â†’ ReLU â†’ Dropout(0.1)
          â†’ Linear(128) â†’ LayerNorm â†’ ReLU â†’ Dropout(0.1)
          â†’ Linear(1) â†’ Value
```

### Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… PPO

**1. Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ ØªØ¬Ø±Ø¨Ù‡:**
```
for t in episode:
    a_t, log_Ï€(a_t|s_t), V(s_t) = Ï€_Î¸(s_t)
    s_{t+1}, r_t ~ Env(s_t, a_t)
    Store (s_t, a_t, r_t, V(s_t), log_Ï€(a_t|s_t))
```

**2. Ù…Ø­Ø§Ø³Ø¨Ù‡ GAE (Generalized Advantage Estimation):**
```
Î´_t = r_t + Î³ V(s_{t+1}) - V(s_t)
A_t = Î£_{l=0}^{âˆ} (Î³Î»)^l Î´_{t+l}
```

**3. Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Policy (PPO Clipped):**
```
ratio_t = Ï€_Î¸(a_t|s_t) / Ï€_Î¸_old(a_t|s_t)
L^CLIP = min(ratio_t Ã— A_t, 
             clip(ratio_t, 1-Îµ, 1+Îµ) Ã— A_t)
```

**4. Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Value:**
```
L^VF = (V_Î¸(s_t) - V_target)Â²
```

**5. ØªØ§Ø¨Ø¹ Ù‡Ø¯Ù Ú©Ù„ÛŒ:**
```
L = L^CLIP - câ‚ L^VF + câ‚‚ H(Ï€_Î¸)
```

Ú©Ù‡ `H(Ï€_Î¸)` Ø¢Ù†ØªØ±ÙˆÙ¾ÛŒ Ø¨Ø±Ø§ÛŒ ØªØ´ÙˆÛŒÙ‚ exploration Ø§Ø³Øª.

### CVaR Risk-Aware Objective

**ØªØ¹Ø±ÛŒÙ CVaR:**
```
CVaR_Î±(X) = E[X | X â‰¥ VaR_Î±(X)]
          = (1/(1-Î±)) âˆ«_{Î±}^{1} VaR_u(X) du
```

Ú©Ù‡:
- `Î± = 0.95`: Ø³Ø·Ø­ Ø§Ø·Ù…ÛŒÙ†Ø§Ù†
- `VaR_Î±`: Value at Risk (Ú©ÙˆØ§Ù†ØªØ§ÛŒÙ„ 95%)
- `CVaR_Î±`: Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† 5% Ø¨Ø¯ØªØ±ÛŒÙ† Ø³Ù†Ø§Ø±ÛŒÙˆÙ‡Ø§

**Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¹Ù…Ù„ÛŒ:**
```python
threshold = percentile(returns, (1-Î±) Ã— 100)
worst_returns = returns[returns â‰¤ threshold]
CVaR = mean(worst_returns)
```

**Ø¬Ø±ÛŒÙ…Ù‡ Ø±ÛŒØ³Ú© Ø¯Ø± Reward:**
```
risk_penalty = -CVaR Ã— Î»_risk_aversion
R_total = R_operational + risk_penalty
```

---

## Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ Ù…Ø±Ø¬Ø¹

### 1. DRL Ø³Ø§Ø¯Ù‡ (Simple DRL)

**ØªÙØ§ÙˆØªâ€ŒÙ‡Ø§ Ø¨Ø§ Ø±ÙˆØ´ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ:**
- âŒ Ø¨Ø¯ÙˆÙ† Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ (Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² actual values)
- âŒ Ø¨Ø¯ÙˆÙ† Ù„Ø§ÛŒÙ‡ Ø±ÛŒØ³Ú© (CVaR)
- âœ… Ù…Ø¹Ù…Ø§Ø±ÛŒ Ø³Ø§Ø¯Ù‡â€ŒØªØ±: [128, 128]
- âœ… Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Policy Gradient Ø³Ø§Ø¯Ù‡

### 2. Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ú©Ù„Ø§Ø³ÛŒÚ© (Classical MILP)

**ÙØ±Ù…ÙˆÙ„â€ŒØ¨Ù†Ø¯ÛŒ:**
```
min Î£_t (Cost_grid,t + Cost_CHP,t + Cost_boiler,t)

subject to:
  Power balance constraints
  SOC dynamics
  Component limits
  Ramp constraints
```

**Ø±ÙˆØ´ Ø­Ù„:**
- Linear Programming (LP)
- Ø§ÙÙ‚ Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ: 24 Ø³Ø§Ø¹Øª
- Ø­Ù„ Ø¯Ø± Ù‡Ø± timestep (MPC style)

**Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§:**
- ÙØ±Ø¶ Ù‚Ø·Ø¹ÛŒ Ø¨ÙˆØ¯Ù† Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒâ€ŒÙ‡Ø§
- Ø²Ù…Ø§Ù† Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¨Ø§Ù„Ø§
- Ø¹Ø¯Ù… ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ø§Ø² ØªØ¬Ø±Ø¨Ù‡

---

## Ù…Ø¹ÛŒØ§Ø±Ù‡Ø§ÛŒ Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ

### 1. Ù…Ø¹ÛŒØ§Ø±Ù‡Ø§ÛŒ Ø§Ù‚ØªØµØ§Ø¯ÛŒ

```python
# Ù‡Ø²ÛŒÙ†Ù‡ Ú©Ù„
Total_Cost = Î£_t Cost_t

# Ù‡Ø²ÛŒÙ†Ù‡ Ù…ØªÙˆØ³Ø·
Mean_Cost = Total_Cost / T

# CVaR Ù‡Ø²ÛŒÙ†Ù‡ (Ø±ÛŒØ³Ú©)
CVaR_Cost = E[Cost | Cost â‰¥ VaR_0.95]
```

### 2. Ù…Ø¹ÛŒØ§Ø±Ù‡Ø§ÛŒ Ù‚Ø§Ø¨Ù„ÛŒØª Ø§Ø·Ù…ÛŒÙ†Ø§Ù†

```python
# ØªØ¹Ø¯Ø§Ø¯ Ù†Ù‚Ø¶ Ù‚ÛŒÙˆØ¯
Violation_Count = Î£_t ğŸ™[any_constraint_violated]

# Ù†Ø±Ø® Ù†Ù‚Ø¶
Violation_Rate = Violation_Count / T

# Ø´Ø¯Øª Ù…ØªÙˆØ³Ø· Ù†Ù‚Ø¶
Mean_Violation = Î£_t violation_magnitude_t / Violation_Count
```

### 3. Ù…Ø¹ÛŒØ§Ø±Ù‡Ø§ÛŒ Ø¨Ù‡Ø±Ù‡â€ŒØ¨Ø±Ø¯Ø§Ø±ÛŒ Ø¨Ø§ØªØ±ÛŒ

```python
# ØªØ¹Ø¯Ø§Ø¯ Ú†Ø±Ø®Ù‡â€ŒÙ‡Ø§
Cycles = Î£_t |P_bat,t| / (2 Ã— E_bat_capacity)

# Ù†Ø±Ù…â€ŒØ¨ÙˆØ¯Ù† Ø¹Ù…Ù„Ú©Ø±Ø¯ (smoothness)
Smoothness = 1 / (1 + mean(|P_bat,t - P_bat,t-1|))

# Ù…Ø­Ø¯ÙˆØ¯Ù‡ SOC Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡
SOC_Range = max(SOC) - min(SOC)
```

### 4. Ù…Ø¹ÛŒØ§Ø±Ù‡Ø§ÛŒ Ù…Ø­ÛŒØ·ÛŒ

```python
# Ù†Ø±Ø® Ø¨Ù‡Ø±Ù‡â€ŒØ¨Ø±Ø¯Ø§Ø±ÛŒ Ø§Ø² ØªØ¬Ø¯ÛŒØ¯Ù¾Ø°ÛŒØ±Ù‡Ø§
Renewable_Utilization = Î£_t (P_pv + P_wt) / Î£_t P_load

# Ú©Ø§Ù‡Ø´ Ø§Ù†ØªØ´Ø§Ø± (ÙØ±Ø¶ÛŒ)
Emission_Reduction = f(Renewable_Utilization)
```

---

## Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ ØªÙ†Ø¸ÛŒÙ…

### Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ ØªÙ†Ø¸ÛŒÙ… Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§

#### 1. Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Ø±ÛŒØ²Ø´Ø¨Ú©Ù‡

**Ø¸Ø±ÙÛŒØª Ø¨Ø§ØªØ±ÛŒ:**
- Ú©ÙˆÚ†Ú© (250 kWh): Ø§Ù†Ø¹Ø·Ø§Ù Ú©Ù…ØªØ±ØŒ Ù†Ù‚Ø¶ Ø¨ÛŒØ´ØªØ±
- Ù…ØªÙˆØ³Ø· (500 kWh): âœ… ØªÙˆØµÛŒÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
- Ø¨Ø²Ø±Ú¯ (1000 kWh): Ù‡Ø²ÛŒÙ†Ù‡ Ø³Ø±Ù…Ø§ÛŒÙ‡â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø¨Ø§Ù„Ø§

**Ù†Ø³Ø¨Øª Ø¸Ø±ÙÛŒØª ØªØ¬Ø¯ÛŒØ¯Ù¾Ø°ÛŒØ±Ù‡Ø§:**
```
Penetration_Ratio = (P_pv + P_wt) / P_load_avg

20-40%: Ù…Ø­Ø§ÙØ¸Ù‡â€ŒÚ©Ø§Ø±Ø§Ù†Ù‡
40-60%: âœ… Ù…ØªØ¹Ø§Ø¯Ù„
60-80%: Ú†Ø§Ù„Ø´â€ŒØ¨Ø±Ø§Ù†Ú¯ÛŒØ²ØŒ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¨Ø§ØªØ±ÛŒ Ø¨Ø²Ø±Ú¯
```

#### 2. Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ PPO

**Learning Rate:**
```
Actor: 3e-4   # Ú©Ù…ØªØ± Ø¨Ø±Ø§ÛŒ Ù¾Ø§ÛŒØ¯Ø§Ø±ÛŒ
Critic: 1e-3  # Ø¨ÛŒØ´ØªØ± Ø¨Ø±Ø§ÛŒ Ù‡Ù…Ú¯Ø±Ø§ÛŒÛŒ Ø³Ø±ÛŒØ¹
```

**Clip Epsilon:**
```
Îµ = 0.2   # Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ PPO
Îµ < 0.1   # Ù…Ø­Ø§ÙØ¸Ù‡â€ŒÚ©Ø§Ø±Ø§Ù†Ù‡â€ŒØªØ±
Îµ > 0.3   # exploration Ø¨ÛŒØ´ØªØ±
```

**GAE Lambda:**
```
Î» = 0.95  # âœ… ØªÙˆØ§Ø²Ù† bias-variance
Î» â†’ 1     # variance Ø¨Ø§Ù„Ø§
Î» â†’ 0     # bias Ø¨Ø§Ù„Ø§
```

#### 3. Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Ø±ÛŒØ³Ú©

**CVaR Alpha:**
```
Î± = 0.90  # Ù…Ø­Ø§ÙØ¸Ù‡â€ŒÚ©Ø§Ø±Ø§Ù†Ù‡â€ŒØªØ± (10% worst)
Î± = 0.95  # âœ… Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ (5% worst)
Î± = 0.99  # ØªÙ…Ø±Ú©Ø² Ø±ÙˆÛŒ extreme events
```

**Risk Aversion Weight:**
```
Î»_risk = 0.1  # Ú©Ù…â€ŒØ±ÛŒØ³Ú©â€ŒÙ¾Ø°ÛŒØ± Ú©Ù…
Î»_risk = 0.3  # âœ… Ù…ØªØ¹Ø§Ø¯Ù„
Î»_risk = 0.5  # Ú©Ù…â€ŒØ±ÛŒØ³Ú©â€ŒÙ¾Ø°ÛŒØ± Ø²ÛŒØ§Ø¯
```

---

## Ù†Ú©Ø§Øª Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ

### Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯

1. **Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² GPU:**
```python
device = 'cuda' if torch.cuda.is_available() else 'cpu'
model.to(device)
```

2. **Batch Processing:**
```python
batch_size = 32  # Ø¨Ø±Ø§ÛŒ GPU
batch_size = 64  # Ø¨Ø±Ø§ÛŒ GPU Ù‚ÙˆÛŒ
```

3. **Ø­Ø§ÙØ¸Ù‡:**
- Forecasting: ~2 GB RAM
- Training: ~4 GB GPU memory
- Evaluation: ~1 GB RAM

### Ø±ÙØ¹ Ø§Ø´Ú©Ø§Ù„ Ø±Ø§ÛŒØ¬

**Ù…Ø´Ú©Ù„: Ù‡Ù…Ú¯Ø±Ø§ÛŒÛŒ Ù†Ø´Ø¯Ù† PPO**
- Ú©Ø§Ù‡Ø´ learning rate
- Ø§ÙØ²Ø§ÛŒØ´ buffer size
- Ú©Ø§Ù‡Ø´ clip epsilon

**Ù…Ø´Ú©Ù„: Ù†Ù‚Ø¶ Ø²ÛŒØ§Ø¯ Ù‚ÛŒÙˆØ¯**
- Ø§ÙØ²Ø§ÛŒØ´ ÙˆØ²Ù† Ø¬Ø±ÛŒÙ…Ù‡ Ù‚ÛŒÙˆØ¯
- Ú©ÙˆÚ†Ú© Ú©Ø±Ø¯Ù† action space
- Pre-training Ø¨Ø§ Ø±ÙˆØ´ heuristic

**Ù…Ø´Ú©Ù„: Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ Ø¶Ø¹ÛŒÙ**
- Ø§ÙØ²Ø§ÛŒØ´ lookback window
- ØªÙ†Ø¸ÛŒÙ… hyp parameters CNN-LSTM
- Ø§ÙØ²Ø§ÛŒØ´ epoch Ù‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´

---

## Ù…Ø±Ø§Ø¬Ø¹ Ø¹Ù„Ù…ÛŒ

[1] Cao, D., et al. (2021). Deep Reinforcement Learning-Based Energy Storage Arbitrage. IEEE Trans. Smart Grid.

[2] Chow, Y., et al. (2018). Risk-Constrained Reinforcement Learning with Percentile Risk Criteria. JMLR.

[3] Mancarella, P. (2014). MES: An Overview of Concepts and Evaluation Models. Energy.

[4] Wang, H., et al. (2019). A Review of Deep Learning for Renewable Energy Forecasting. Energy Conversion and Management.

[5] Schulman, J., et al. (2017). Proximal Policy Optimization Algorithms. arXiv.

---

**Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ**: Ø¯Ø³Ø§Ù…Ø¨Ø± 2024
